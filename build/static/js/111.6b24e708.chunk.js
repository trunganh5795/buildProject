"use strict";(self.webpackChunklaptop_store=self.webpackChunklaptop_store||[]).push([[111],{65783:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(33032),s=n(23430),a=n(84322),c=n.n(a),l=n(23695),o=n(3581),i=n(66106),u=n(30914),d=n(44137),m=n(37382),p=n(20662),f=n(87309),h=n(70188),x=n(58300),v=n(72791),j=n(82426),y=n(89484),g=n(62944),Z={getVoucher:function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[null],t.forEach((function(e){n.find((function(t){return t===e.category}))||n.push(e.category)})),"admin/voucher/type",e.abrupt("return",g.Z.get("admin/voucher/type",{params:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=Z,N=n(80184);function C(e){var t=e.carts,n=e.isCheckout,a=e.transportFee,g=e.onCheckout,Z=e.isLoading,C=e.selectedVoucher,w=(0,v.useState)(""),k=(0,s.Z)(w,2),P=k[0],z=k[1],E=(0,v.useState)(null),O=(0,s.Z)(E,2),T=O[0],V=O[1],I=(0,v.useMemo)((function(){return null!==T&&5===P.length?x.Z.getDiscountVoucher(t,P,T,l.ZP,C):0}),[P]),D=t.reduce((function(e,t){return e+(t.price+t.price*t.discount/100)*t.amount}),0),S=t.reduce((function(e,t){return e+t.price*t.discount/100*t.amount}),0);(0,v.useEffect)((function(){var e=function(){var e=(0,r.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==T){e.next=5;break}return e.next=3,b.getVoucher(t);case 3:n=e.sent,V(n.data.rows);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}),[]);var U=(0,v.useMemo)((function(){return(0,N.jsx)(o.Z,{onClick:function(e){z(e.key)},className:"voucher-menu",children:null===T||void 0===T?void 0:T.map((function(e){var t,n;return(0,N.jsx)(o.Z.Item,{children:(0,N.jsxs)(i.Z,{gutter:8,style:{width:"150px"},children:[(0,N.jsx)(u.Z,{span:12,children:(0,N.jsx)(d.Z,{preview:!1,src:y,width:"50px"})}),(0,N.jsxs)(u.Z,{span:12,children:[(0,N.jsx)("b",{children:e.code}),(0,N.jsx)("div",{children:(0,N.jsxs)("b",{style:{color:"red"},children:["- ",(null===(t=e.percentage[0])||void 0===t?void 0:t.percent)||(null===(n=e.amount[0])||void 0===n?void 0:n.amount)," ",e.percentage[0]?" %":" $"]})})]})]})},e.code)}))})}),[T]);return(0,N.jsxs)("div",{className:"Payment bg-white p-16",children:[(0,N.jsx)("h2",{className:"m-b-8",children:"Order total"}),(0,N.jsxs)("div",{className:"d-flex justify-content-between m-b-6",children:[(0,N.jsx)("span",{className:"font-size-16px",style:{color:"#aaa"},children:"Subtotal"}),(0,N.jsx)("b",{children:x.Z.formatProductPrice(D)})]}),(0,N.jsxs)("div",{className:"d-flex justify-content-between m-b-6",children:[(0,N.jsx)("span",{className:"font-size-16px",style:{color:"#aaa"},children:"Discount"}),(0,N.jsx)("b",{children:x.Z.formatProductPrice(S)})]}),(0,N.jsxs)("div",{className:"d-flex justify-content-between m-b-6",children:[(0,N.jsx)("span",{className:"font-size-16px",style:{color:"#aaa"},children:"Voucher"}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)(m.Z,{overlay:U,trigger:["click"],placement:"bottomLeft",selectable:!0,arrow:!0,children:(0,N.jsx)(p.Z,{value:P,placeholder:"",size:"default",className:"w-100px m-l-10",onChange:function(e){z(e.target.value)},allowClear:!0})})}),(0,N.jsxs)("b",{style:{color:"red"},children:[0!==I&&"- ".concat(I," $")," "]})]}),(0,N.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,N.jsx)("span",{className:"font-size-16px",style:{color:"#aaa"},children:"Total"}),(0,N.jsx)("b",{style:{color:"red",fontSize:20},children:x.Z.formatProductPrice(D-S-I+a)})]}),n?(0,N.jsx)(f.Z,{onClick:g,className:"m-t-16 d-block m-lr-auto w-100",type:"primary",size:"large",loading:Z,style:{backgroundColor:"#3555c5",color:"#fff"},children:"CHECK OUT"}):(0,N.jsx)(j.rU,{to:h.Z.ROUTES.PAYMENT,children:(0,N.jsx)(f.Z,{className:"m-t-16 d-block m-lr-auto w-100",type:"primary",size:"large",style:{backgroundColor:"#3555c5",color:"#fff"},children:"Checkout"})})]})}C.defaultProps={carts:[],isCheckout:!1,transportFee:0,isLoading:!1};var w=C},2111:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(11890),s=n(66106),a=n(30914),c=n(20662),l=n(87309),o=(n(72791),n(25978)),i=n(82426),u=n(6400),d=n(18489),m=n(82622),p=n(2649),f=n(43751),h=n(38243),x=n(58300),v=n(80184);function j(e){var t=e.BookId,n=e.title,r=(e.code,e.author),s=e.img,a=e.instock,c=e.discount,l=e.price,o=e.amount,u=e.index,d=e.onDelCartItem,j=e.onUpdateNumOfProd;return(0,v.jsxs)("div",{className:"d-flex bg-white p-12 bor-rad-4 justify-content-between",children:[(0,v.jsxs)("div",{className:"d-flex flex-grow-1",children:[(0,v.jsx)(p.C,{src:s,alt:"Photo",shape:"square",size:64}),(0,v.jsxs)("div",{className:"d-flex flex-direction-column p-10 ",children:[(0,v.jsx)(i.rU,{to:"/product/".concat(t),className:"font-size-16px",children:(0,v.jsx)(f.Z,{title:n,children:x.Z.reduceProductName(n,40)})}),(0,v.jsxs)("span",{style:{color:"#aaa"},children:["Author: ",x.Z.reduceProductName(r,20)]})]})]}),(0,v.jsxs)("div",{className:"d-flex align-i-center",style:{flexBasis:128},children:[(0,v.jsx)(m.Z,{className:"m-r-18 icon-del-item",onClick:function(){return d(u)}}),(0,v.jsx)("div",{children:(0,v.jsx)(h.Z,{height:20,min:1,max:a,value:o,onChange:function(e){return j(u,e)},size:"large",style:{borderColor:"#3555C5"}})})]}),(0,v.jsxs)("div",{className:"d-flex flex-direction-column align-i-end justify-content-center",style:{flexBasis:200},children:[(0,v.jsx)("b",{className:"font-size-18px",style:{color:"#3555C5"},children:x.Z.formatProductPrice(l-l*c/100)}),0===c?"":(0,v.jsx)("span",{style:{textDecoration:"line-through",color:"#aaa"},children:x.Z.formatProductPrice(l)})]})]})}j.defaultProps={BookId:"",image:"",code:"",discount:0,title:"",price:0,instock:0,amount:1};var y=j,g=n(96038);function Z(e){var t=e.carts,n=(0,o.I0)(),r=function(e){n(u.Z.delCartItem(e))},s=function(e,t){n(u.Z.updateCartItem(e,t))};return(0,v.jsxs)(v.Fragment,{children:[t.map((function(e,t){return(0,v.jsx)("div",{className:"",children:(0,v.jsx)(y,(0,d.Z)((0,d.Z)({index:t},e),{},{onDelCartItem:r,onUpdateNumOfProd:s}))},t)})),(0,v.jsx)("div",{className:"bg-white p-12 m-b-12 p-t-0 t-right",children:(0,v.jsx)(g.Z,{title:"Do you want to remove all products from your cart ?",placement:"left",okButtonProps:{type:"danger"},onConfirm:function(){n(u.Z.resetCart())},okText:"Confirm",cancelText:"Cancell",children:(0,v.jsx)(l.Z,{type:"primary",danger:!0,size:"large",children:"Remove All"})})})]})}Z.defaultProps={carts:[]};var b=Z,N=n(65783);var C=function(){var e=(0,o.v9)((function(e){return e.carts}));return(0,o.I0)(),(0,v.jsx)("div",{className:"Cart-Detail-View container m-t-20",style:{minHeight:"80vh"},children:(0,v.jsxs)(s.Z,{gutter:[16,16],children:[(0,v.jsxs)(a.Z,{span:24,className:"d-flex page-position",children:[(0,v.jsx)(i.rU,{to:"/",children:(0,v.jsx)(r.Z,{className:"p-12 icon-home font-size-16px bg-white"})}),(0,v.jsx)("span",{className:"r-arrow p-lr-8 font-weight-500",children:">"}),(0,v.jsx)("span",{className:"cart-name p-8 font-weight-500 bg-white",children:"Cart"})]}),e.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.Z,{span:24,className:"d-flex justify-content-between"}),(0,v.jsxs)(a.Z,{span:24,md:16,children:[(0,v.jsx)(b,{carts:e}),(0,v.jsxs)(s.Z,{justify:"end",gutter:10,children:[(0,v.jsx)(a.Z,{span:8,className:"t-right",children:(0,v.jsx)("h2",{children:"Voucher"})}),(0,v.jsx)(a.Z,{span:3,children:(0,v.jsx)(c.Z,{placeholder:"",size:"large",width:"100%"})}),(0,v.jsx)(a.Z,{span:3,className:"text-center",children:(0,v.jsx)(l.Z,{type:"primary",size:"large",className:"w-100",children:"Apply"})})]})]}),(0,v.jsx)(a.Z,{span:24,md:8,children:(0,v.jsx)(N.Z,{carts:e})})]}):(0,v.jsxs)(a.Z,{span:24,className:"t-center",style:{minHeight:"90vh"},children:[(0,v.jsx)("h2",{className:"m-tb-16",style:{color:"#888"},children:"Your cart is currently empty"}),(0,v.jsx)(i.rU,{to:"/",children:(0,v.jsx)(l.Z,{type:"primary",size:"large",children:"Shopping now"})})]})]})})}},96038:function(e,t,n){var r=n(83963),s=n(34093),a=n(10187),c=n(81694),l=n.n(c),o=n(75179),i=n(11354),u=n(72791),d=n(87309),m=n(2571),p=n(71929),f=n(93486),h=n(70454),x=n(69228),v=n(41783),j=n(57924),y=n(61113),g=void 0,Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},b=u.forwardRef((function(e,t){var n=u.useContext(p.E_).getPrefixCls,a=(0,o.Z)(!1,{value:e.visible,defaultValue:e.defaultVisible}),c=(0,s.Z)(a,2),b=c[0],N=c[1],C=function(t,n){var r;N(t,!0),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t,n)},w=function(e){C(!1,e)},k=function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(g,t)},P=function(t){var n;C(!1,t),null===(n=e.onCancel)||void 0===n||n.call(g,t)},z=e.prefixCls,E=e.placement,O=e.children,T=e.overlayClassName,V=Z(e,["prefixCls","placement","children","overlayClassName"]),I=n("popover",z),D=n("popconfirm",z),S=l()(D,T),U=u.createElement(f.Z,{componentName:"Popconfirm",defaultLocale:h.Z.Popconfirm},(function(t){return function(t,s){var a=e.okButtonProps,c=e.cancelButtonProps,l=e.title,o=e.cancelText,i=e.okText,p=e.okType,f=e.icon,h=e.showCancel,x=void 0===h||h;return u.createElement("div",{className:"".concat(t,"-inner-content")},u.createElement("div",{className:"".concat(t,"-message")},f,u.createElement("div",{className:"".concat(t,"-message-title")},(0,j.Z)(l))),u.createElement("div",{className:"".concat(t,"-buttons")},x&&u.createElement(d.Z,(0,r.Z)({onClick:P,size:"small"},c),o||s.cancelText),u.createElement(v.Z,{buttonProps:(0,r.Z)((0,r.Z)({size:"small"},(0,m.n)(p)),a),actionFn:k,close:w,prefixCls:n("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},i||s.okText)))}(I,t)}));return u.createElement(x.Z,(0,r.Z)({},V,{prefixCls:I,placement:E,onVisibleChange:function(t){e.disabled||C(t)},visible:b,_overlay:U,overlayClassName:S,ref:t}),(0,y.Tm)(O,{onKeyDown:function(e){var t,n;u.isValidElement(O)&&(null===(n=null===O||void 0===O?void 0:(t=O.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===i.Z.ESC&&b&&C(!1,e)}(e)}}))}));b.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:u.createElement(a.Z,null),disabled:!1},t.Z=b},89484:function(e,t,n){e.exports=n.p+"static/media/voucher.c21e56b26b7bac565569.png"}}]);
//# sourceMappingURL=111.6b24e708.chunk.js.map