{"version":3,"file":"static/js/157.0645857e.chunk.js","mappings":"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","sources":["apis/addressApi.js","apis/voucherClient.js","components/Cart/Payment/index.js","containers/AccountPage/UserAddressList/AddressAddForm/index.js","containers/AccountPage/UserAddressList/index.js","../node_modules/@ant-design/icons-svg/es/asn/DollarCircleOutlined.js","../node_modules/@ant-design/icons/es/icons/DollarCircleOutlined.js","../node_modules/qrcode.react/lib/esm/index.js","containers/PaymentPage/index.js"],"sourcesContent":["import axiosClient from './axiosClient';\r\n\r\nconst ADDRESS_API_ENDPOINT = '/address';\r\n\r\nconst addressApi = {\r\n  // api: lấy danh sách các tỉnh thành\r\n  getProvince: () => {\r\n    const url = ADDRESS_API_ENDPOINT + '/province';\r\n    return axiosClient.get(url);\r\n  },\r\n\r\n  // api: lấy danh sách huyện/quận theo id tỉnh\r\n  getDistrict: (provinceId) => {\r\n    const url = ADDRESS_API_ENDPOINT + '/district';\r\n    return axiosClient.get(url, { params: { id: provinceId } });\r\n  },\r\n\r\n  // api: lấy danh sách huyện/quận theo id tỉnh\r\n  getWardStreetList: (districtId) => {\r\n    const url = ADDRESS_API_ENDPOINT + '/ward';\r\n    return axiosClient.get(url, {\r\n      params: { district: districtId },\r\n    });\r\n  },\r\n\r\n  // api: Lấy danh sách địa chỉ nhận hàng, flag = 1 lấy địa chỉ thô chưa convert sang string\r\n  getDeliveryAddressList: (userId, flag = 0) => {\r\n    const url = ADDRESS_API_ENDPOINT + '/delivery';\r\n    return axiosClient.get(url, { params: { userId, flag } });\r\n  },\r\n\r\n  // api: Thêm địa chỉ nhận hàng\r\n  postAddDeliveryAddress: (userId, newAddress) => {\r\n    const url = ADDRESS_API_ENDPOINT + '/delivery';\r\n    return axiosClient.post(url, { userId, newAddress });\r\n  },\r\n\r\n  // api: Xoá 1 địa chỉ giao nhận\r\n  delDeliveryAddress: (userId, item) => {\r\n    const url = ADDRESS_API_ENDPOINT + '/delivery';\r\n    return axiosClient.delete(url, { params: { userId, item } });\r\n  },\r\n\r\n  // api: sửa mặc định địa chỉ giao\r\n  putSetDefaultDeliveryAddress: (userId, addressId) => {\r\n    const url = ADDRESS_API_ENDPOINT + '/delivery';\r\n    // console.log(\"Here\")\r\n    return axiosClient.put(url, { addressId });\r\n  },\r\n};\r\n\r\nexport default addressApi;\r\n","import axiosClient from './axiosClient';\r\nconst VOUCHER_API_ENDPOINT = '/voucher';\r\n\r\nconst voucherApi = {\r\n  // Lấy danh sách voucher phù hợp với đơn hàng\r\n  getVoucher: async (cart) => {\r\n    let categories = [null]; // null tương ứng với voucher áp dụng cho tất cả loại sách\r\n    cart.forEach(item => {\r\n      //kiểm tra xem trong giỏ hàng có những loại sách nào\r\n      let bookCategory = categories.find(category => category === item.category);\r\n      if (!bookCategory) {\r\n        categories.push(item.category)\r\n      }\r\n    });\r\n    const url = 'admin/voucher/type'\r\n    return axiosClient.get(\r\n      url,\r\n      { params: categories }\r\n    )\r\n  }\r\n};\r\n\r\nexport default voucherApi;\r\n","import { Button, Col, Dropdown, Image, Input, Menu, message, Row, Space } from 'antd';\r\nimport constants from '../../../constants/index';\r\nimport helpers from '../../../helpers';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { DeleteOutlined, DownOutlined } from '@ant-design/icons';\r\nimport './index.scss'\r\nimport voucherIcon from '../../../assets/icon/voucher.png'\r\nimport voucherApi from '../../../apis/voucherClient';\r\n// let voucherList = [\"SG337\", 'SG998', 'SG554', 'SG235', 'SF456']\r\n\r\nfunction CartPayment(props) {\r\n  const { carts, isCheckout, transportFee, onCheckout, isLoading, selectedVoucher } = props;\r\n  const [voucher, setVoucher] = useState('')\r\n  const [voucherList, setVoucherList] = useState(null)\r\n  //Giảm giá voucher:\r\n  const voucherDiscountValue = useMemo(() => {\r\n    if (voucherList !== null && voucher.length === 5) {\r\n      return helpers.getDiscountVoucher(carts, voucher, voucherList, message, selectedVoucher);\r\n    } else {\r\n      return 0;\r\n    }\r\n  }, [voucher])\r\n  // giá tạm tính\r\n  const tempPrice = carts.reduce(\r\n    (a, b) => a + (b.price + (b.price * b.discount) / 100) * b.amount,\r\n    0,\r\n  );\r\n  // tổng khuyến mãi\r\n  const totalDiscount = carts.reduce(\r\n    (a, b) => a + ((b.price * b.discount) / 100) * b.amount,\r\n    0,\r\n  );\r\n  useEffect(() => {\r\n    const getVoucher = async () => {\r\n      if (voucherList === null) {\r\n        let result = await voucherApi.getVoucher(carts)\r\n        setVoucherList(result.data.rows);\r\n      }\r\n    }\r\n\r\n    getVoucher();\r\n    return () => {\r\n\r\n    }\r\n  }, [])\r\n\r\n  const menu = useMemo(() => (\r\n    <Menu\r\n      onClick={(e) => {\r\n        // console.log(e.item)\r\n        setVoucher(e.key)\r\n        // selectedVoucher.current()\r\n      }}\r\n      className='voucher-menu'\r\n    >\r\n      {voucherList?.map(item => {\r\n        return <Menu.Item key={item.code}>\r\n          <Row gutter={8} style={{ width: '150px' }}>\r\n            <Col span={12}>\r\n              <Image\r\n                preview={false}\r\n                src={voucherIcon}\r\n                width={'50px'}\r\n              />\r\n            </Col>\r\n            <Col span={12}>\r\n              <b>{item.code}</b>\r\n              <div><b style={{ color: 'red' }}>- {item.percentage[0]?.percent || item.amount[0]?.amount} {item.percentage[0] ? \" %\" : \" $\"}</b></div>\r\n            </Col>\r\n          </Row>\r\n        </Menu.Item>\r\n      })}\r\n    </Menu>\r\n  ), [voucherList])\r\n\r\n  // rendering ...\r\n  return (\r\n    <div className=\"Payment bg-white p-16\">\r\n      <h2 className=\"m-b-8\">Order total</h2>\r\n      <div className=\"d-flex justify-content-between m-b-6\">\r\n        <span className=\"font-size-16px\" style={{ color: '#aaa' }}>\r\n          Subtotal\r\n        </span>\r\n        <b>{helpers.formatProductPrice(tempPrice)}</b>\r\n      </div>\r\n      {/* <div className=\"d-flex justify-content-between m-b-6\">\r\n        <span className=\"font-size-16px\" style={{ color: '#aaa' }}>\r\n          Shipping\r\n        </span>\r\n        <b>{helpers.formatProductPrice(transportFee)}</b>\r\n      </div> */}\r\n      <div className=\"d-flex justify-content-between m-b-6\">\r\n        <span className=\"font-size-16px\" style={{ color: '#aaa' }}>\r\n          Discount\r\n        </span>\r\n        <b>{helpers.formatProductPrice(totalDiscount)}</b>\r\n      </div>\r\n      <div className=\"d-flex justify-content-between m-b-6\">\r\n        <span className=\"font-size-16px\" style={{ color: '#aaa' }}>\r\n          Voucher\r\n        </span>\r\n        <div className='flex-grow-1'>\r\n          <Dropdown overlay={menu} trigger={['click']} placement=\"bottomLeft\" selectable arrow>\r\n            <Input\r\n              value={voucher}\r\n              placeholder=\"\"\r\n              size='default'\r\n              className='w-100px m-l-10'\r\n              onChange={(e) => {\r\n                //Chỉ khi bấm nút \"x\" or nhập tay event này mới đc kích hoạt\r\n                setVoucher(e.target.value)\r\n              }}\r\n              allowClear\r\n            />\r\n            {/* <Button icon={<DeleteOutlined />} /> */}\r\n          </Dropdown>\r\n        </div>\r\n        <b style={{ color: 'red' }}>{voucherDiscountValue !== 0 && `- ${voucherDiscountValue} $`} </b>\r\n      </div>\r\n      <div className=\"d-flex justify-content-between\">\r\n        <span className=\"font-size-16px\" style={{ color: '#aaa' }}>\r\n          Total\r\n        </span>\r\n        <b style={{ color: 'red', fontSize: 20 }}>\r\n          {helpers.formatProductPrice(tempPrice - totalDiscount - voucherDiscountValue + transportFee)}\r\n        </b>\r\n      </div>\r\n      {/* <div className=\"t-end\">\r\n        <span\r\n          style={{ color: '#aaa', fontSize: 16 }}>{`(Đã bao gồm VAT)`}</span>\r\n      </div> */}\r\n\r\n      {isCheckout ? (\r\n        <Button\r\n          onClick={onCheckout}\r\n          className=\"m-t-16 d-block m-lr-auto w-100\"\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          loading={isLoading}\r\n          style={{ backgroundColor: '#3555c5', color: '#fff' }}>\r\n          CHECK OUT\r\n        </Button>\r\n      ) : (\r\n        <Link to={constants.ROUTES.PAYMENT}>\r\n          <Button\r\n            className=\"m-t-16 d-block m-lr-auto w-100\"\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            style={{ backgroundColor: '#3555c5', color: '#fff' }}>\r\n            Checkout\r\n          </Button>\r\n        </Link>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nCartPayment.defaultProps = {\r\n  carts: [],\r\n  isCheckout: false, // cờ kiểm tra có phải ở trang checkout để lập đơn hàng hay k\r\n  transportFee: 0,\r\n  isLoading: false,\r\n};\r\n\r\nCartPayment.propTypes = {\r\n  carts: PropTypes.array,\r\n  isCheckout: PropTypes.bool,\r\n  transportFee: PropTypes.number,\r\n  onCheckout: PropTypes.func,\r\n  isLoading: PropTypes.bool,\r\n};\r\n\r\nexport default CartPayment;\r\n","import { Button, Col, Form, Input, message, Modal, Row, Select } from 'antd';\nimport addressApi from '../../../../apis/addressApi';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nconst { Option } = Select;\n\nfunction AddressAddForm(props) {\n  const { onCloseForm } = props;\n  const [isVisible, setIsVisible] = useState(true);\n  const [provinceList, setProvinceList] = useState([]);\n  const [districtList, setDistrictList] = useState([]);\n  const [wardList, setWardList] = useState([]);\n  const [streetList, setStreetList] = useState([]);\n  const provinceId = useRef('');\n  const formRef = useRef(null);\n  const user = useSelector((state) => state.user);\n\n  // fn: lấy danh sách tỉnh thành\n  useEffect(() => {\n    // dùng để cleanup effect\n    let isSubscribe = true;\n\n    async function getProvinceList() {\n      try {\n        const response = await addressApi.getProvince();\n        if (response) {\n          if (isSubscribe) setProvinceList(response.data);\n        }\n      } catch (error) { }\n    }\n    getProvinceList();\n    // cleanup\n    return () => (isSubscribe = false);\n  }, []);\n\n  // fn: lấy danh sách huyện/xã khi đã chọn tỉnh/thành\n  const getDistrictList = async (provinceId = 0) => {\n    try {\n      const response = await addressApi.getDistrict(provinceId);\n      if (response) {\n        setDistrictList(response.data);\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  // fn: lấy danh sách huyện/xã khi đã chọn tỉnh/thành\n  const getWardStreetList = async (districtId) => {\n    try {\n      const response = await addressApi.getWardStreetList(\n        districtId\n      );\n      if (response) {\n        // setStreetList(response.data.streets);\n        setWardList(response.data.wards);\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  // event: thêm địa chỉ\n  const onAddAddress = async (newAddress) => {\n    try {\n      const { name, phone, ...rest } = newAddress;\n      const sentData = { name, phone, address: { ...rest } };\n      const userId = user._id;\n      const response = await addressApi.postAddDeliveryAddress(\n        userId,\n        sentData,\n      );\n      if (response && response.status === 200) {\n        message.success('Thêm địa chỉ thành công', 2);\n      }\n    } catch (error) {\n      if (error) {\n        if (error.response) message.error(error.response.data.message, 2);\n        else message.error('Thêm địa chỉ thất bại', 2);\n      }\n    }\n    setIsVisible(false);\n    onCloseForm(1);\n  };\n\n  // rendering ...\n  return (\n    <Modal\n      visible={isVisible}\n      closable={true}\n      maskClosable={false}\n      onCancel={() => {\n        setIsVisible(false);\n        onCloseForm();\n      }}\n      centered\n      width={768}\n      footer={[\n        <Button\n          key=\"back\"\n          danger\n          onClick={() => {\n            setIsVisible(false);\n            onCloseForm();\n          }}>\n          Huỷ bỏ\n        </Button>,\n        <Button key=\"submit\" type=\"primary\" htmlType=\"submit\" form=\"form\">\n          Thêm địa chỉ\n        </Button>,\n      ]}>\n      <Form onFinish={onAddAddress} ref={formRef} name=\"form\">\n        <Row gutter={[32, 0]}>\n          <Col span={12}>\n            <h3>Thông tin người nhận hàng</h3>\n            <Form.Item\n              name=\"name\"\n              className=\"m-tb-16\"\n              rules={[\n                { required: true, message: '* Bắt buộc nhập' },\n                {\n                  max: 40,\n                  message: 'Tối đa 40 ký tự',\n                },\n              ]}>\n              <Input size=\"middle\" placeholder=\"Họ tên *\" maxLength={60} />\n            </Form.Item>\n            <Form.Item\n              name=\"phone\"\n              rules={[\n                { required: true, message: '* Bắt buộc nhập' },\n                {\n                  validator: (_, value) =>\n                    /0\\d{0,9}/gi.test(value)\n                      ? Promise.resolve()\n                      : Promise.reject('Số điện thoại không hợp lệ'),\n                },\n                {\n                  max: 11,\n                  message: 'Số điện thoại bao gồm 10 đến 11 số',\n                },\n                {\n                  min: 10,\n                  message: 'Số điện thoại bao gồm 10 đến 11 số',\n                },\n              ]}>\n              <Input\n                size=\"middle\"\n                placeholder=\"Số điện thoại *\"\n                maxLength={12}\n              />\n            </Form.Item>\n          </Col>\n          <Col span={12}>\n            <h3>Địa chỉ giao hàng</h3>\n            {/* tỉnh thành */}\n            <Form.Item\n              name=\"province\"\n              rules={[{ required: true, message: '* bắt buộc nhập' }]}>\n              <Select\n                filterOption={(input, option) =>\n                  option.children.toLowerCase().indexOf(input.toLowerCase()) >=\n                  0\n                }\n                showSearch\n                onChange={(value) => {\n                  getDistrictList(value);\n                  provinceId.current = value;\n                  formRef.current.resetFields(['district', 'ward', 'street']);\n                }}\n                placeholder=\"Tỉnh/thành\"\n                className=\"m-tb-16\"\n                size=\"middle\">\n                {provinceList.map((item, index) => (\n                  <Option value={item.id} key={index}>\n                    {item.name}\n                  </Option>\n                ))}\n              </Select>\n            </Form.Item>\n            {/* huyễn/ quận */}\n            <Form.Item\n              name=\"district\"\n              rules={[{ required: true, message: '* bắt buộc nhập' }]}>\n              <Select\n                filterOption={(input, option) =>\n                  option.children.toLowerCase().indexOf(input.toLowerCase()) >=\n                  0\n                }\n                showSearch\n                onChange={(value) =>\n                  getWardStreetList(value)\n                }\n                placeholder=\"Huyện/Quận\"\n                size=\"middle\">\n                {districtList.map((item, index) => (\n                  <Option value={item.id} key={index}>\n                    {item.name}\n                  </Option>\n                ))}\n              </Select>\n            </Form.Item>\n            {/* phường, xã */}\n            <Form.Item\n              name=\"ward\"\n              rules={[{ required: true, message: '* bắt buộc nhập' }]}>\n              <Select\n                filterOption={(input, option) =>\n                  option.children.toLowerCase().indexOf(input.toLowerCase()) >=\n                  0\n                }\n                className=\"m-tb-16\"\n                showSearch\n                placeholder=\"Phường/Xã\"\n                size=\"middle\">\n                {wardList.map((item, index) => (\n                  <Option value={item.id} key={index}>\n                    {item.prefix + ' ' + item.name}\n                  </Option>\n                ))}\n              </Select>\n            </Form.Item>\n            {/* đường */}\n            {/* chi tiết */}\n            <Form.Item\n              name=\"details\"\n              rules={[{ required: true, message: '* bắt buộc nhập' }]}>\n              <Input\n                className=\"m-t-16\"\n                maxLength={100}\n                placeholder=\"Khu phố, Tên đường, Số nhà cụ thể\"\n                size=\"middle\"\n              />\n            </Form.Item>\n          </Col>\n        </Row>\n      </Form>\n    </Modal>\n  );\n}\n\nAddressAddForm.propTypes = {\n  onCloseForm: PropTypes.func,\n};\n\nexport default AddressAddForm;\n","import PropTypes from 'prop-types';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { Button, Col, message, Modal, Row, Spin } from 'antd';\nimport addressApi from '../../../apis/addressApi';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport AddressAddForm from './AddressAddForm';\n\nfunction AddressUserList(props) {\n  const { isCheckout, onChecked, showAll } = props;\n  //onChecked là hàm để chọn địa chỉ, isCheckout = true => đây là bước thanh toán\n  const [isVisibleForm, setIsVisibleForm] = useState(false);\n  const [isVisibelAddressList, setIsVisibelAddressList] = useState(false)\n  const [list, setList] = useState([]);\n  const [activeItem, setActiveItem] = useState(-1);\n  const user = useSelector((state) => state.user);\n  const [updateList, setUpdateList] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // event: xoá 1 địa chỉ giao nhận\n  const onDelDeliveryAdd = async (item) => {\n    try {\n      const response = await addressApi.delDeliveryAddress(user.id, item);\n      if (response) {\n        message.success('Xoá địa chỉ thành công');\n        setUpdateList(!updateList);\n      }\n    } catch (error) {\n      message.error('Xoá địa chỉ giao, nhận thất bại.');\n    }\n  };\n\n  // event: đặt mặc định\n  const onSetDefaultDeliveryAdd = async (addressId) => {\n    try {\n      const response = await addressApi.putSetDefaultDeliveryAddress(\n        user.id,\n        addressId);\n      if (response) {\n        message.success('Cập nhật thành công');\n        let defaultAddIndex = 0;\n        list.forEach((item, index) => {\n          if (item.id === addressId) {\n            item.defaultAddress = true\n            defaultAddIndex = index\n          } else {\n            item.defaultAddress = false\n          }\n        })\n        list.sort((a, b) => -(Number(a.defaultAddress) - Number(b.defaultAddress)))\n        setList([...list])\n      }\n    } catch (error) {\n      message.error('Cập nhật thất bại.');\n    }\n  };\n\n  // fn: hiển thị danh sách\n  function showAddressList(list = [], showAll = false) {\n    let newList = []\n    if (showAll) {\n      newList = list\n    } else {\n      newList.push(list[0])\n    }\n    return (\n      newList &&\n      newList.map((item, index) => (\n        <div\n          className={`bg-white bor-rad-8 box-sha-home p-tb-8 p-lr-16 m-b-16 ${activeItem === index && isCheckout ? 'item-active' : ''\n            }`}\n          onClick={() => {\n            if (isCheckout) {\n              setActiveItem(index);\n              onChecked(item.id);\n            }\n          }}\n          key={index}>\n          <Row>\n            <Col span={18}>\n              <p className=\"m-b-6\">\n                <b>Người nhận: </b> {item.reciver}\n              </p>\n              <p className=\"m-b-6\">\n                <b>Địa chỉ:</b> {item.ward.district.province.name} , {item.ward.district.prefix + \" \" + item.ward.district.name} , {item.ward.prefix + \" \" + item.ward.name}\n              </p>\n              <p className=\"m-b-6\">\n                <b>Số nhà:</b> {item.details}\n              </p>\n              <p className=\"m-b-6\">\n                <b>Số điện thoại:</b> {item.phone}\n              </p>\n            </Col>\n            <Col span={6}>\n              <div className=\"d-flex m-b-4 justify-content-end\">\n                <h3>\n                  <b>{item.name}</b>\n                  {item.defaultAddress && (\n                    <span\n                      className=\"font-size-12px p-tb-4 p-lr-8 m-l-8 bor-rad-4\"\n                      style={{ border: 'solid 1px #3a5dd9', color: '#3a5dd9' }}>\n                      Mặc định\n                    </span>\n                  )}\n                </h3>\n                <div>\n                  {!showAll && (\n                    <Button\n                      type=\"link\"\n                      onClick={() => { setIsVisibelAddressList(prev => !prev) }}\n                    >\n                      Thay đổi\n                    </Button>\n                  )}\n\n                </div>\n                {/* {index !== 0 && !isCheckout && ( */}\n                {/* {!showAll && !item.defaultAddress && ( */}\n                {!item.defaultAddress && (\n                  <div>\n                    <Button\n                      type=\"primary\"\n                      onClick={() => onSetDefaultDeliveryAdd(item.id)}>\n                      Đặt mặc định\n                    </Button>\n                    <br />\n                    <Button\n                      // style={{width:'100%'}}\n                      className=\"w-100 m-t-5\"\n                      danger\n                      type=\"primary\"\n                      onClick={() => onDelDeliveryAdd(item.id)}>\n                      Xoá\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </Col>\n          </Row>\n        </div>\n      ))\n    );\n  }\n\n  // event: Lấy danh sách địa chỉ\n  useEffect(() => {\n    let isSubscribe = true;\n    async function getDeliveryAddressList() {\n      try {\n        setIsLoading(true);\n        const response = await addressApi.getDeliveryAddressList(user.id);\n        if (isSubscribe && response) {\n          setList(response.data.list);\n          setIsLoading(false);\n        }\n      } catch (error) {\n        if (isSubscribe) {\n          setList([]);\n          setIsLoading(false);\n        }\n      }\n    }\n    if (user.id) getDeliveryAddressList();\n    return () => (isSubscribe = false);\n  }, [user]);\n\n  // rendering\n  return (\n    <>\n      {isLoading ? (\n        <div className=\"t-center m-tb-48\">\n          <Spin tip=\"Đang tải danh sách địa chỉ giao hàng ...\" size=\"large\" />\n        </div>\n      ) : (\n        <div className=\"User-Address-List\">\n          {/* thêm địa chỉ, chỉ cho tối đa 5 địa chỉ */}\n          {list.length < 5 && (\n            <Button\n              type=\"dashed\"\n              size=\"large\"\n              className=\"w-100\"\n              onClick={() => setIsVisibleForm(true)}\n              style={{ height: 54 }}>\n              <PlusOutlined />\n              Thêm địa chỉ\n            </Button>\n          )}\n          {/* hiện danh sách địa chỉ */}\n          {list.length > 0 ? (\n            <div className=\"m-t-16\">{showAddressList(list, showAll)}</div>\n          ) : (\n            <h3 className=\"m-t-16 t-center\" style={{ color: '#888' }}>\n              Hiện tại bạn chưa có địa chỉ giao, nhận hàng nào\n            </h3>\n          )}\n          {isVisibleForm && (\n            <AddressAddForm\n              onCloseForm={(addFlag) => {\n                // cở hiệu báo thêm mới địa chỉ thành công để cập nhật lại địa chỉ\n                if (addFlag) setUpdateList(!updateList);\n                setIsVisibleForm(false);\n              }}\n            />\n          )}\n\n          <Modal\n            visible={isVisibelAddressList}\n            // closable={true}\n            // maskClosable={false}\n            onCancel={() => {\n              setIsVisibelAddressList(false);\n              // onCloseForm();\n            }}\n            onOk={() => {\n              [list[0], list[activeItem]] = [list[activeItem], list[0]];\n              setList([...list])\n              setIsVisibelAddressList(false)\n            }}\n            centered\n            width={768}>\n            <div className='m-t-20'>\n              {showAddressList(list, true)}\n            </div>\n          </Modal>\n        </div>\n      )}\n    </>\n  );\n}\n\nAddressUserList.defaultProps = {\n  isCheckout: false,\n  onChecked: function () { },\n};\n\nAddressUserList.propTypes = {\n  isCheckout: PropTypes.bool,\n  onChecked: PropTypes.func,\n};\n\nexport default AddressUserList;\n","// This icon file is generated automatically.\nvar DollarCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z\" } }] }, \"name\": \"dollar-circle\", \"theme\": \"outlined\" };\nexport default DollarCircleOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DollarCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/DollarCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DollarCircleOutlined = function DollarCircleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: DollarCircleOutlinedSvg\n  }));\n};\n\nDollarCircleOutlined.displayName = 'DollarCircleOutlined';\nexport default /*#__PURE__*/React.forwardRef(DollarCircleOutlined);","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\n\n// src/index.tsx\nimport React, { useRef, useEffect } from \"react\";\n\n// src/third-party/qrcodegen/index.ts\n/**\n * @license QR Code generator library (TypeScript)\n * Copyright (c) Project Nayuki.\n * SPDX-License-Identifier: MIT\n */\nvar qrcodegen;\n((qrcodegen2) => {\n  const _QrCode = class {\n    constructor(version, errorCorrectionLevel, dataCodewords, msk) {\n      this.version = version;\n      this.errorCorrectionLevel = errorCorrectionLevel;\n      this.modules = [];\n      this.isFunction = [];\n      if (version < _QrCode.MIN_VERSION || version > _QrCode.MAX_VERSION)\n        throw new RangeError(\"Version value out of range\");\n      if (msk < -1 || msk > 7)\n        throw new RangeError(\"Mask value out of range\");\n      this.size = version * 4 + 17;\n      let row = [];\n      for (let i = 0; i < this.size; i++)\n        row.push(false);\n      for (let i = 0; i < this.size; i++) {\n        this.modules.push(row.slice());\n        this.isFunction.push(row.slice());\n      }\n      this.drawFunctionPatterns();\n      const allCodewords = this.addEccAndInterleave(dataCodewords);\n      this.drawCodewords(allCodewords);\n      if (msk == -1) {\n        let minPenalty = 1e9;\n        for (let i = 0; i < 8; i++) {\n          this.applyMask(i);\n          this.drawFormatBits(i);\n          const penalty = this.getPenaltyScore();\n          if (penalty < minPenalty) {\n            msk = i;\n            minPenalty = penalty;\n          }\n          this.applyMask(i);\n        }\n      }\n      assert(0 <= msk && msk <= 7);\n      this.mask = msk;\n      this.applyMask(msk);\n      this.drawFormatBits(msk);\n      this.isFunction = [];\n    }\n    static encodeText(text, ecl) {\n      const segs = qrcodegen2.QrSegment.makeSegments(text);\n      return _QrCode.encodeSegments(segs, ecl);\n    }\n    static encodeBinary(data, ecl) {\n      const seg = qrcodegen2.QrSegment.makeBytes(data);\n      return _QrCode.encodeSegments([seg], ecl);\n    }\n    static encodeSegments(segs, ecl, minVersion = 1, maxVersion = 40, mask = -1, boostEcl = true) {\n      if (!(_QrCode.MIN_VERSION <= minVersion && minVersion <= maxVersion && maxVersion <= _QrCode.MAX_VERSION) || mask < -1 || mask > 7)\n        throw new RangeError(\"Invalid value\");\n      let version;\n      let dataUsedBits;\n      for (version = minVersion; ; version++) {\n        const dataCapacityBits2 = _QrCode.getNumDataCodewords(version, ecl) * 8;\n        const usedBits = QrSegment.getTotalBits(segs, version);\n        if (usedBits <= dataCapacityBits2) {\n          dataUsedBits = usedBits;\n          break;\n        }\n        if (version >= maxVersion)\n          throw new RangeError(\"Data too long\");\n      }\n      for (const newEcl of [_QrCode.Ecc.MEDIUM, _QrCode.Ecc.QUARTILE, _QrCode.Ecc.HIGH]) {\n        if (boostEcl && dataUsedBits <= _QrCode.getNumDataCodewords(version, newEcl) * 8)\n          ecl = newEcl;\n      }\n      let bb = [];\n      for (const seg of segs) {\n        appendBits(seg.mode.modeBits, 4, bb);\n        appendBits(seg.numChars, seg.mode.numCharCountBits(version), bb);\n        for (const b of seg.getData())\n          bb.push(b);\n      }\n      assert(bb.length == dataUsedBits);\n      const dataCapacityBits = _QrCode.getNumDataCodewords(version, ecl) * 8;\n      assert(bb.length <= dataCapacityBits);\n      appendBits(0, Math.min(4, dataCapacityBits - bb.length), bb);\n      appendBits(0, (8 - bb.length % 8) % 8, bb);\n      assert(bb.length % 8 == 0);\n      for (let padByte = 236; bb.length < dataCapacityBits; padByte ^= 236 ^ 17)\n        appendBits(padByte, 8, bb);\n      let dataCodewords = [];\n      while (dataCodewords.length * 8 < bb.length)\n        dataCodewords.push(0);\n      bb.forEach((b, i) => dataCodewords[i >>> 3] |= b << 7 - (i & 7));\n      return new _QrCode(version, ecl, dataCodewords, mask);\n    }\n    getModule(x, y) {\n      return 0 <= x && x < this.size && 0 <= y && y < this.size && this.modules[y][x];\n    }\n    getModules() {\n      return this.modules;\n    }\n    drawFunctionPatterns() {\n      for (let i = 0; i < this.size; i++) {\n        this.setFunctionModule(6, i, i % 2 == 0);\n        this.setFunctionModule(i, 6, i % 2 == 0);\n      }\n      this.drawFinderPattern(3, 3);\n      this.drawFinderPattern(this.size - 4, 3);\n      this.drawFinderPattern(3, this.size - 4);\n      const alignPatPos = this.getAlignmentPatternPositions();\n      const numAlign = alignPatPos.length;\n      for (let i = 0; i < numAlign; i++) {\n        for (let j = 0; j < numAlign; j++) {\n          if (!(i == 0 && j == 0 || i == 0 && j == numAlign - 1 || i == numAlign - 1 && j == 0))\n            this.drawAlignmentPattern(alignPatPos[i], alignPatPos[j]);\n        }\n      }\n      this.drawFormatBits(0);\n      this.drawVersion();\n    }\n    drawFormatBits(mask) {\n      const data = this.errorCorrectionLevel.formatBits << 3 | mask;\n      let rem = data;\n      for (let i = 0; i < 10; i++)\n        rem = rem << 1 ^ (rem >>> 9) * 1335;\n      const bits = (data << 10 | rem) ^ 21522;\n      assert(bits >>> 15 == 0);\n      for (let i = 0; i <= 5; i++)\n        this.setFunctionModule(8, i, getBit(bits, i));\n      this.setFunctionModule(8, 7, getBit(bits, 6));\n      this.setFunctionModule(8, 8, getBit(bits, 7));\n      this.setFunctionModule(7, 8, getBit(bits, 8));\n      for (let i = 9; i < 15; i++)\n        this.setFunctionModule(14 - i, 8, getBit(bits, i));\n      for (let i = 0; i < 8; i++)\n        this.setFunctionModule(this.size - 1 - i, 8, getBit(bits, i));\n      for (let i = 8; i < 15; i++)\n        this.setFunctionModule(8, this.size - 15 + i, getBit(bits, i));\n      this.setFunctionModule(8, this.size - 8, true);\n    }\n    drawVersion() {\n      if (this.version < 7)\n        return;\n      let rem = this.version;\n      for (let i = 0; i < 12; i++)\n        rem = rem << 1 ^ (rem >>> 11) * 7973;\n      const bits = this.version << 12 | rem;\n      assert(bits >>> 18 == 0);\n      for (let i = 0; i < 18; i++) {\n        const color = getBit(bits, i);\n        const a = this.size - 11 + i % 3;\n        const b = Math.floor(i / 3);\n        this.setFunctionModule(a, b, color);\n        this.setFunctionModule(b, a, color);\n      }\n    }\n    drawFinderPattern(x, y) {\n      for (let dy = -4; dy <= 4; dy++) {\n        for (let dx = -4; dx <= 4; dx++) {\n          const dist = Math.max(Math.abs(dx), Math.abs(dy));\n          const xx = x + dx;\n          const yy = y + dy;\n          if (0 <= xx && xx < this.size && 0 <= yy && yy < this.size)\n            this.setFunctionModule(xx, yy, dist != 2 && dist != 4);\n        }\n      }\n    }\n    drawAlignmentPattern(x, y) {\n      for (let dy = -2; dy <= 2; dy++) {\n        for (let dx = -2; dx <= 2; dx++)\n          this.setFunctionModule(x + dx, y + dy, Math.max(Math.abs(dx), Math.abs(dy)) != 1);\n      }\n    }\n    setFunctionModule(x, y, isDark) {\n      this.modules[y][x] = isDark;\n      this.isFunction[y][x] = true;\n    }\n    addEccAndInterleave(data) {\n      const ver = this.version;\n      const ecl = this.errorCorrectionLevel;\n      if (data.length != _QrCode.getNumDataCodewords(ver, ecl))\n        throw new RangeError(\"Invalid argument\");\n      const numBlocks = _QrCode.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver];\n      const blockEccLen = _QrCode.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver];\n      const rawCodewords = Math.floor(_QrCode.getNumRawDataModules(ver) / 8);\n      const numShortBlocks = numBlocks - rawCodewords % numBlocks;\n      const shortBlockLen = Math.floor(rawCodewords / numBlocks);\n      let blocks = [];\n      const rsDiv = _QrCode.reedSolomonComputeDivisor(blockEccLen);\n      for (let i = 0, k = 0; i < numBlocks; i++) {\n        let dat = data.slice(k, k + shortBlockLen - blockEccLen + (i < numShortBlocks ? 0 : 1));\n        k += dat.length;\n        const ecc = _QrCode.reedSolomonComputeRemainder(dat, rsDiv);\n        if (i < numShortBlocks)\n          dat.push(0);\n        blocks.push(dat.concat(ecc));\n      }\n      let result = [];\n      for (let i = 0; i < blocks[0].length; i++) {\n        blocks.forEach((block, j) => {\n          if (i != shortBlockLen - blockEccLen || j >= numShortBlocks)\n            result.push(block[i]);\n        });\n      }\n      assert(result.length == rawCodewords);\n      return result;\n    }\n    drawCodewords(data) {\n      if (data.length != Math.floor(_QrCode.getNumRawDataModules(this.version) / 8))\n        throw new RangeError(\"Invalid argument\");\n      let i = 0;\n      for (let right = this.size - 1; right >= 1; right -= 2) {\n        if (right == 6)\n          right = 5;\n        for (let vert = 0; vert < this.size; vert++) {\n          for (let j = 0; j < 2; j++) {\n            const x = right - j;\n            const upward = (right + 1 & 2) == 0;\n            const y = upward ? this.size - 1 - vert : vert;\n            if (!this.isFunction[y][x] && i < data.length * 8) {\n              this.modules[y][x] = getBit(data[i >>> 3], 7 - (i & 7));\n              i++;\n            }\n          }\n        }\n      }\n      assert(i == data.length * 8);\n    }\n    applyMask(mask) {\n      if (mask < 0 || mask > 7)\n        throw new RangeError(\"Mask value out of range\");\n      for (let y = 0; y < this.size; y++) {\n        for (let x = 0; x < this.size; x++) {\n          let invert;\n          switch (mask) {\n            case 0:\n              invert = (x + y) % 2 == 0;\n              break;\n            case 1:\n              invert = y % 2 == 0;\n              break;\n            case 2:\n              invert = x % 3 == 0;\n              break;\n            case 3:\n              invert = (x + y) % 3 == 0;\n              break;\n            case 4:\n              invert = (Math.floor(x / 3) + Math.floor(y / 2)) % 2 == 0;\n              break;\n            case 5:\n              invert = x * y % 2 + x * y % 3 == 0;\n              break;\n            case 6:\n              invert = (x * y % 2 + x * y % 3) % 2 == 0;\n              break;\n            case 7:\n              invert = ((x + y) % 2 + x * y % 3) % 2 == 0;\n              break;\n            default:\n              throw new Error(\"Unreachable\");\n          }\n          if (!this.isFunction[y][x] && invert)\n            this.modules[y][x] = !this.modules[y][x];\n        }\n      }\n    }\n    getPenaltyScore() {\n      let result = 0;\n      for (let y = 0; y < this.size; y++) {\n        let runColor = false;\n        let runX = 0;\n        let runHistory = [0, 0, 0, 0, 0, 0, 0];\n        for (let x = 0; x < this.size; x++) {\n          if (this.modules[y][x] == runColor) {\n            runX++;\n            if (runX == 5)\n              result += _QrCode.PENALTY_N1;\n            else if (runX > 5)\n              result++;\n          } else {\n            this.finderPenaltyAddHistory(runX, runHistory);\n            if (!runColor)\n              result += this.finderPenaltyCountPatterns(runHistory) * _QrCode.PENALTY_N3;\n            runColor = this.modules[y][x];\n            runX = 1;\n          }\n        }\n        result += this.finderPenaltyTerminateAndCount(runColor, runX, runHistory) * _QrCode.PENALTY_N3;\n      }\n      for (let x = 0; x < this.size; x++) {\n        let runColor = false;\n        let runY = 0;\n        let runHistory = [0, 0, 0, 0, 0, 0, 0];\n        for (let y = 0; y < this.size; y++) {\n          if (this.modules[y][x] == runColor) {\n            runY++;\n            if (runY == 5)\n              result += _QrCode.PENALTY_N1;\n            else if (runY > 5)\n              result++;\n          } else {\n            this.finderPenaltyAddHistory(runY, runHistory);\n            if (!runColor)\n              result += this.finderPenaltyCountPatterns(runHistory) * _QrCode.PENALTY_N3;\n            runColor = this.modules[y][x];\n            runY = 1;\n          }\n        }\n        result += this.finderPenaltyTerminateAndCount(runColor, runY, runHistory) * _QrCode.PENALTY_N3;\n      }\n      for (let y = 0; y < this.size - 1; y++) {\n        for (let x = 0; x < this.size - 1; x++) {\n          const color = this.modules[y][x];\n          if (color == this.modules[y][x + 1] && color == this.modules[y + 1][x] && color == this.modules[y + 1][x + 1])\n            result += _QrCode.PENALTY_N2;\n        }\n      }\n      let dark = 0;\n      for (const row of this.modules)\n        dark = row.reduce((sum, color) => sum + (color ? 1 : 0), dark);\n      const total = this.size * this.size;\n      const k = Math.ceil(Math.abs(dark * 20 - total * 10) / total) - 1;\n      assert(0 <= k && k <= 9);\n      result += k * _QrCode.PENALTY_N4;\n      assert(0 <= result && result <= 2568888);\n      return result;\n    }\n    getAlignmentPatternPositions() {\n      if (this.version == 1)\n        return [];\n      else {\n        const numAlign = Math.floor(this.version / 7) + 2;\n        const step = this.version == 32 ? 26 : Math.ceil((this.version * 4 + 4) / (numAlign * 2 - 2)) * 2;\n        let result = [6];\n        for (let pos = this.size - 7; result.length < numAlign; pos -= step)\n          result.splice(1, 0, pos);\n        return result;\n      }\n    }\n    static getNumRawDataModules(ver) {\n      if (ver < _QrCode.MIN_VERSION || ver > _QrCode.MAX_VERSION)\n        throw new RangeError(\"Version number out of range\");\n      let result = (16 * ver + 128) * ver + 64;\n      if (ver >= 2) {\n        const numAlign = Math.floor(ver / 7) + 2;\n        result -= (25 * numAlign - 10) * numAlign - 55;\n        if (ver >= 7)\n          result -= 36;\n      }\n      assert(208 <= result && result <= 29648);\n      return result;\n    }\n    static getNumDataCodewords(ver, ecl) {\n      return Math.floor(_QrCode.getNumRawDataModules(ver) / 8) - _QrCode.ECC_CODEWORDS_PER_BLOCK[ecl.ordinal][ver] * _QrCode.NUM_ERROR_CORRECTION_BLOCKS[ecl.ordinal][ver];\n    }\n    static reedSolomonComputeDivisor(degree) {\n      if (degree < 1 || degree > 255)\n        throw new RangeError(\"Degree out of range\");\n      let result = [];\n      for (let i = 0; i < degree - 1; i++)\n        result.push(0);\n      result.push(1);\n      let root = 1;\n      for (let i = 0; i < degree; i++) {\n        for (let j = 0; j < result.length; j++) {\n          result[j] = _QrCode.reedSolomonMultiply(result[j], root);\n          if (j + 1 < result.length)\n            result[j] ^= result[j + 1];\n        }\n        root = _QrCode.reedSolomonMultiply(root, 2);\n      }\n      return result;\n    }\n    static reedSolomonComputeRemainder(data, divisor) {\n      let result = divisor.map((_) => 0);\n      for (const b of data) {\n        const factor = b ^ result.shift();\n        result.push(0);\n        divisor.forEach((coef, i) => result[i] ^= _QrCode.reedSolomonMultiply(coef, factor));\n      }\n      return result;\n    }\n    static reedSolomonMultiply(x, y) {\n      if (x >>> 8 != 0 || y >>> 8 != 0)\n        throw new RangeError(\"Byte out of range\");\n      let z = 0;\n      for (let i = 7; i >= 0; i--) {\n        z = z << 1 ^ (z >>> 7) * 285;\n        z ^= (y >>> i & 1) * x;\n      }\n      assert(z >>> 8 == 0);\n      return z;\n    }\n    finderPenaltyCountPatterns(runHistory) {\n      const n = runHistory[1];\n      assert(n <= this.size * 3);\n      const core = n > 0 && runHistory[2] == n && runHistory[3] == n * 3 && runHistory[4] == n && runHistory[5] == n;\n      return (core && runHistory[0] >= n * 4 && runHistory[6] >= n ? 1 : 0) + (core && runHistory[6] >= n * 4 && runHistory[0] >= n ? 1 : 0);\n    }\n    finderPenaltyTerminateAndCount(currentRunColor, currentRunLength, runHistory) {\n      if (currentRunColor) {\n        this.finderPenaltyAddHistory(currentRunLength, runHistory);\n        currentRunLength = 0;\n      }\n      currentRunLength += this.size;\n      this.finderPenaltyAddHistory(currentRunLength, runHistory);\n      return this.finderPenaltyCountPatterns(runHistory);\n    }\n    finderPenaltyAddHistory(currentRunLength, runHistory) {\n      if (runHistory[0] == 0)\n        currentRunLength += this.size;\n      runHistory.pop();\n      runHistory.unshift(currentRunLength);\n    }\n  };\n  let QrCode = _QrCode;\n  QrCode.MIN_VERSION = 1;\n  QrCode.MAX_VERSION = 40;\n  QrCode.PENALTY_N1 = 3;\n  QrCode.PENALTY_N2 = 3;\n  QrCode.PENALTY_N3 = 40;\n  QrCode.PENALTY_N4 = 10;\n  QrCode.ECC_CODEWORDS_PER_BLOCK = [\n    [-1, 7, 10, 15, 20, 26, 18, 20, 24, 30, 18, 20, 24, 26, 30, 22, 24, 28, 30, 28, 28, 28, 28, 30, 30, 26, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],\n    [-1, 10, 16, 26, 18, 24, 16, 18, 22, 22, 26, 30, 22, 22, 24, 24, 28, 28, 26, 26, 26, 26, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28],\n    [-1, 13, 22, 18, 26, 18, 24, 18, 22, 20, 24, 28, 26, 24, 20, 30, 24, 28, 28, 26, 30, 28, 30, 30, 30, 30, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30],\n    [-1, 17, 28, 22, 16, 22, 28, 26, 26, 24, 28, 24, 28, 22, 24, 24, 30, 28, 28, 26, 28, 30, 24, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30]\n  ];\n  QrCode.NUM_ERROR_CORRECTION_BLOCKS = [\n    [-1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 4, 4, 4, 4, 4, 6, 6, 6, 6, 7, 8, 8, 9, 9, 10, 12, 12, 12, 13, 14, 15, 16, 17, 18, 19, 19, 20, 21, 22, 24, 25],\n    [-1, 1, 1, 1, 2, 2, 4, 4, 4, 5, 5, 5, 8, 9, 9, 10, 10, 11, 13, 14, 16, 17, 17, 18, 20, 21, 23, 25, 26, 28, 29, 31, 33, 35, 37, 38, 40, 43, 45, 47, 49],\n    [-1, 1, 1, 2, 2, 4, 4, 6, 6, 8, 8, 8, 10, 12, 16, 12, 17, 16, 18, 21, 20, 23, 23, 25, 27, 29, 34, 34, 35, 38, 40, 43, 45, 48, 51, 53, 56, 59, 62, 65, 68],\n    [-1, 1, 1, 2, 4, 4, 4, 5, 6, 8, 8, 11, 11, 16, 16, 18, 16, 19, 21, 25, 25, 25, 34, 30, 32, 35, 37, 40, 42, 45, 48, 51, 54, 57, 60, 63, 66, 70, 74, 77, 81]\n  ];\n  qrcodegen2.QrCode = QrCode;\n  function appendBits(val, len, bb) {\n    if (len < 0 || len > 31 || val >>> len != 0)\n      throw new RangeError(\"Value out of range\");\n    for (let i = len - 1; i >= 0; i--)\n      bb.push(val >>> i & 1);\n  }\n  function getBit(x, i) {\n    return (x >>> i & 1) != 0;\n  }\n  function assert(cond) {\n    if (!cond)\n      throw new Error(\"Assertion error\");\n  }\n  const _QrSegment = class {\n    constructor(mode, numChars, bitData) {\n      this.mode = mode;\n      this.numChars = numChars;\n      this.bitData = bitData;\n      if (numChars < 0)\n        throw new RangeError(\"Invalid argument\");\n      this.bitData = bitData.slice();\n    }\n    static makeBytes(data) {\n      let bb = [];\n      for (const b of data)\n        appendBits(b, 8, bb);\n      return new _QrSegment(_QrSegment.Mode.BYTE, data.length, bb);\n    }\n    static makeNumeric(digits) {\n      if (!_QrSegment.isNumeric(digits))\n        throw new RangeError(\"String contains non-numeric characters\");\n      let bb = [];\n      for (let i = 0; i < digits.length; ) {\n        const n = Math.min(digits.length - i, 3);\n        appendBits(parseInt(digits.substr(i, n), 10), n * 3 + 1, bb);\n        i += n;\n      }\n      return new _QrSegment(_QrSegment.Mode.NUMERIC, digits.length, bb);\n    }\n    static makeAlphanumeric(text) {\n      if (!_QrSegment.isAlphanumeric(text))\n        throw new RangeError(\"String contains unencodable characters in alphanumeric mode\");\n      let bb = [];\n      let i;\n      for (i = 0; i + 2 <= text.length; i += 2) {\n        let temp = _QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i)) * 45;\n        temp += _QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i + 1));\n        appendBits(temp, 11, bb);\n      }\n      if (i < text.length)\n        appendBits(_QrSegment.ALPHANUMERIC_CHARSET.indexOf(text.charAt(i)), 6, bb);\n      return new _QrSegment(_QrSegment.Mode.ALPHANUMERIC, text.length, bb);\n    }\n    static makeSegments(text) {\n      if (text == \"\")\n        return [];\n      else if (_QrSegment.isNumeric(text))\n        return [_QrSegment.makeNumeric(text)];\n      else if (_QrSegment.isAlphanumeric(text))\n        return [_QrSegment.makeAlphanumeric(text)];\n      else\n        return [_QrSegment.makeBytes(_QrSegment.toUtf8ByteArray(text))];\n    }\n    static makeEci(assignVal) {\n      let bb = [];\n      if (assignVal < 0)\n        throw new RangeError(\"ECI assignment value out of range\");\n      else if (assignVal < 1 << 7)\n        appendBits(assignVal, 8, bb);\n      else if (assignVal < 1 << 14) {\n        appendBits(2, 2, bb);\n        appendBits(assignVal, 14, bb);\n      } else if (assignVal < 1e6) {\n        appendBits(6, 3, bb);\n        appendBits(assignVal, 21, bb);\n      } else\n        throw new RangeError(\"ECI assignment value out of range\");\n      return new _QrSegment(_QrSegment.Mode.ECI, 0, bb);\n    }\n    static isNumeric(text) {\n      return _QrSegment.NUMERIC_REGEX.test(text);\n    }\n    static isAlphanumeric(text) {\n      return _QrSegment.ALPHANUMERIC_REGEX.test(text);\n    }\n    getData() {\n      return this.bitData.slice();\n    }\n    static getTotalBits(segs, version) {\n      let result = 0;\n      for (const seg of segs) {\n        const ccbits = seg.mode.numCharCountBits(version);\n        if (seg.numChars >= 1 << ccbits)\n          return Infinity;\n        result += 4 + ccbits + seg.bitData.length;\n      }\n      return result;\n    }\n    static toUtf8ByteArray(str) {\n      str = encodeURI(str);\n      let result = [];\n      for (let i = 0; i < str.length; i++) {\n        if (str.charAt(i) != \"%\")\n          result.push(str.charCodeAt(i));\n        else {\n          result.push(parseInt(str.substr(i + 1, 2), 16));\n          i += 2;\n        }\n      }\n      return result;\n    }\n  };\n  let QrSegment = _QrSegment;\n  QrSegment.NUMERIC_REGEX = /^[0-9]*$/;\n  QrSegment.ALPHANUMERIC_REGEX = /^[A-Z0-9 $%*+.\\/:-]*$/;\n  QrSegment.ALPHANUMERIC_CHARSET = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:\";\n  qrcodegen2.QrSegment = QrSegment;\n})(qrcodegen || (qrcodegen = {}));\n((qrcodegen2) => {\n  let QrCode;\n  ((QrCode2) => {\n    const _Ecc = class {\n      constructor(ordinal, formatBits) {\n        this.ordinal = ordinal;\n        this.formatBits = formatBits;\n      }\n    };\n    let Ecc = _Ecc;\n    Ecc.LOW = new _Ecc(0, 1);\n    Ecc.MEDIUM = new _Ecc(1, 0);\n    Ecc.QUARTILE = new _Ecc(2, 3);\n    Ecc.HIGH = new _Ecc(3, 2);\n    QrCode2.Ecc = Ecc;\n  })(QrCode = qrcodegen2.QrCode || (qrcodegen2.QrCode = {}));\n})(qrcodegen || (qrcodegen = {}));\n((qrcodegen2) => {\n  let QrSegment;\n  ((QrSegment2) => {\n    const _Mode = class {\n      constructor(modeBits, numBitsCharCount) {\n        this.modeBits = modeBits;\n        this.numBitsCharCount = numBitsCharCount;\n      }\n      numCharCountBits(ver) {\n        return this.numBitsCharCount[Math.floor((ver + 7) / 17)];\n      }\n    };\n    let Mode = _Mode;\n    Mode.NUMERIC = new _Mode(1, [10, 12, 14]);\n    Mode.ALPHANUMERIC = new _Mode(2, [9, 11, 13]);\n    Mode.BYTE = new _Mode(4, [8, 16, 16]);\n    Mode.KANJI = new _Mode(8, [8, 10, 12]);\n    Mode.ECI = new _Mode(7, [0, 0, 0]);\n    QrSegment2.Mode = Mode;\n  })(QrSegment = qrcodegen2.QrSegment || (qrcodegen2.QrSegment = {}));\n})(qrcodegen || (qrcodegen = {}));\nvar qrcodegen_default = qrcodegen;\n\n// src/index.tsx\n/**\n * @license qrcode.react\n * Copyright (c) Paul O'Shannessy\n * SPDX-License-Identifier: ISC\n */\nvar ERROR_LEVEL_MAP = {\n  L: qrcodegen_default.QrCode.Ecc.LOW,\n  M: qrcodegen_default.QrCode.Ecc.MEDIUM,\n  Q: qrcodegen_default.QrCode.Ecc.QUARTILE,\n  H: qrcodegen_default.QrCode.Ecc.HIGH\n};\nvar DEFAULT_PROPS = {\n  size: 128,\n  level: \"L\",\n  bgColor: \"#FFFFFF\",\n  fgColor: \"#000000\",\n  includeMargin: false\n};\nvar MARGIN_SIZE = 4;\nvar DEFAULT_IMG_SCALE = 0.1;\nfunction generatePath(modules, margin = 0) {\n  const ops = [];\n  modules.forEach(function(row, y) {\n    let start = null;\n    row.forEach(function(cell, x) {\n      if (!cell && start !== null) {\n        ops.push(`M${start + margin} ${y + margin}h${x - start}v1H${start + margin}z`);\n        start = null;\n        return;\n      }\n      if (x === row.length - 1) {\n        if (!cell) {\n          return;\n        }\n        if (start === null) {\n          ops.push(`M${x + margin},${y + margin} h1v1H${x + margin}z`);\n        } else {\n          ops.push(`M${start + margin},${y + margin} h${x + 1 - start}v1H${start + margin}z`);\n        }\n        return;\n      }\n      if (cell && start === null) {\n        start = x;\n      }\n    });\n  });\n  return ops.join(\"\");\n}\nfunction excavateModules(modules, excavation) {\n  return modules.slice().map((row, y) => {\n    if (y < excavation.y || y >= excavation.y + excavation.h) {\n      return row;\n    }\n    return row.map((cell, x) => {\n      if (x < excavation.x || x >= excavation.x + excavation.w) {\n        return cell;\n      }\n      return false;\n    });\n  });\n}\nfunction getImageSettings(props, cells) {\n  const { imageSettings, size, includeMargin } = props;\n  if (imageSettings == null) {\n    return null;\n  }\n  const margin = includeMargin ? MARGIN_SIZE : 0;\n  const numCells = cells.length + margin * 2;\n  const defaultSize = Math.floor(size * DEFAULT_IMG_SCALE);\n  const scale = numCells / size;\n  const w = (imageSettings.width || defaultSize) * scale;\n  const h = (imageSettings.height || defaultSize) * scale;\n  const x = imageSettings.x == null ? cells.length / 2 - w / 2 : imageSettings.x * scale;\n  const y = imageSettings.y == null ? cells.length / 2 - h / 2 : imageSettings.y * scale;\n  let excavation = null;\n  if (imageSettings.excavate) {\n    let floorX = Math.floor(x);\n    let floorY = Math.floor(y);\n    let ceilW = Math.ceil(w + x - floorX);\n    let ceilH = Math.ceil(h + y - floorY);\n    excavation = { x: floorX, y: floorY, w: ceilW, h: ceilH };\n  }\n  return { x, y, h, w, excavation };\n}\nvar SUPPORTS_PATH2D = function() {\n  try {\n    new Path2D().addPath(new Path2D());\n  } catch (e) {\n    return false;\n  }\n  return true;\n}();\nfunction QRCodeCanvas(props) {\n  const _canvas = useRef(null);\n  const _image = useRef(null);\n  function update() {\n    const { value: value2, size: size2, level: level2, bgColor: bgColor2, fgColor: fgColor2, includeMargin: includeMargin2 } = props;\n    if (_canvas.current != null) {\n      const canvas = _canvas.current;\n      const ctx = canvas.getContext(\"2d\");\n      if (!ctx) {\n        return;\n      }\n      let cells = qrcodegen_default.QrCode.encodeText(value2, ERROR_LEVEL_MAP[level2]).getModules();\n      const margin = includeMargin2 ? MARGIN_SIZE : 0;\n      const numCells = cells.length + margin * 2;\n      const calculatedImageSettings = getImageSettings(props, cells);\n      const image = _image.current;\n      const haveImageToRender = calculatedImageSettings != null && image !== null && image.complete && image.naturalHeight !== 0 && image.naturalWidth !== 0;\n      if (haveImageToRender) {\n        if (calculatedImageSettings.excavation != null) {\n          cells = excavateModules(cells, calculatedImageSettings.excavation);\n        }\n      }\n      const pixelRatio = window.devicePixelRatio || 1;\n      canvas.height = canvas.width = size2 * pixelRatio;\n      const scale = size2 / numCells * pixelRatio;\n      ctx.scale(scale, scale);\n      ctx.fillStyle = bgColor2;\n      ctx.fillRect(0, 0, numCells, numCells);\n      ctx.fillStyle = fgColor2;\n      if (SUPPORTS_PATH2D) {\n        ctx.fill(new Path2D(generatePath(cells, margin)));\n      } else {\n        cells.forEach(function(row, rdx) {\n          row.forEach(function(cell, cdx) {\n            if (cell) {\n              ctx.fillRect(cdx + margin, rdx + margin, 1, 1);\n            }\n          });\n        });\n      }\n      if (haveImageToRender) {\n        ctx.drawImage(image, calculatedImageSettings.x + margin, calculatedImageSettings.y + margin, calculatedImageSettings.w, calculatedImageSettings.h);\n      }\n    }\n  }\n  useEffect(() => {\n    update();\n  });\n  const _a = props, {\n    value,\n    size,\n    level,\n    bgColor,\n    fgColor,\n    style,\n    includeMargin,\n    imageSettings\n  } = _a, otherProps = __objRest(_a, [\n    \"value\",\n    \"size\",\n    \"level\",\n    \"bgColor\",\n    \"fgColor\",\n    \"style\",\n    \"includeMargin\",\n    \"imageSettings\"\n  ]);\n  const canvasStyle = __spreadValues({ height: size, width: size }, style);\n  let img = null;\n  let imgSrc = imageSettings == null ? void 0 : imageSettings.src;\n  if (imgSrc != null) {\n    img = /* @__PURE__ */ React.createElement(\"img\", {\n      src: imgSrc,\n      key: imgSrc,\n      style: { display: \"none\" },\n      onLoad: () => {\n        update();\n      },\n      ref: _image\n    });\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"canvas\", __spreadValues({\n    style: canvasStyle,\n    height: size,\n    width: size,\n    ref: _canvas\n  }, otherProps)), img);\n}\nQRCodeCanvas.defaultProps = DEFAULT_PROPS;\nfunction QRCodeSVG(props) {\n  const _a = props, {\n    value,\n    size,\n    level,\n    bgColor,\n    fgColor,\n    includeMargin,\n    imageSettings\n  } = _a, otherProps = __objRest(_a, [\n    \"value\",\n    \"size\",\n    \"level\",\n    \"bgColor\",\n    \"fgColor\",\n    \"includeMargin\",\n    \"imageSettings\"\n  ]);\n  let cells = qrcodegen_default.QrCode.encodeText(value, ERROR_LEVEL_MAP[level]).getModules();\n  const margin = includeMargin ? MARGIN_SIZE : 0;\n  const numCells = cells.length + margin * 2;\n  const calculatedImageSettings = getImageSettings(props, cells);\n  let image = null;\n  if (imageSettings != null && calculatedImageSettings != null) {\n    if (calculatedImageSettings.excavation != null) {\n      cells = excavateModules(cells, calculatedImageSettings.excavation);\n    }\n    image = /* @__PURE__ */ React.createElement(\"image\", {\n      xlinkHref: imageSettings.src,\n      height: calculatedImageSettings.h,\n      width: calculatedImageSettings.w,\n      x: calculatedImageSettings.x + margin,\n      y: calculatedImageSettings.y + margin,\n      preserveAspectRatio: \"none\"\n    });\n  }\n  const fgPath = generatePath(cells, margin);\n  return /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({\n    shapeRendering: \"crispEdges\",\n    height: size,\n    width: size,\n    viewBox: `0 0 ${numCells} ${numCells}`\n  }, otherProps), /* @__PURE__ */ React.createElement(\"path\", {\n    fill: bgColor,\n    d: `M0,0 h${numCells}v${numCells}H0z`\n  }), /* @__PURE__ */ React.createElement(\"path\", {\n    fill: fgColor,\n    d: fgPath\n  }), image);\n}\nQRCodeSVG.defaultProps = DEFAULT_PROPS;\nvar QRCode = (props) => {\n  const _a = props, { renderAs } = _a, otherProps = __objRest(_a, [\"renderAs\"]);\n  if (renderAs === \"svg\") {\n    return /* @__PURE__ */ React.createElement(QRCodeSVG, __spreadValues({}, otherProps));\n  }\n  return /* @__PURE__ */ React.createElement(QRCodeCanvas, __spreadValues({}, otherProps));\n};\nQRCode.defaultProps = __spreadValues({ renderAs: \"canvas\" }, DEFAULT_PROPS);\nexport {\n  QRCodeCanvas,\n  QRCodeSVG,\n  QRCode as default\n};\n","import { DollarCircleOutlined, HomeOutlined } from '@ant-design/icons';\nimport {\n  Avatar,\n  Button,\n  Card,\n  Col,\n  Image,\n  Input,\n  message,\n  Modal,\n  Radio,\n  Result,\n  Row,\n} from 'antd';\nimport addressApi from '../../apis/addressApi';\nimport orderApi from '../../apis/orderApi';\nimport CartPayment from '../../components/Cart/Payment';\nimport constants from '../../constants/index';\nimport AddressUserList from '../../containers/AccountPage/UserAddressList';\nimport helpers from '../../helpers';\nimport React, { useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, Redirect } from 'react-router-dom';\nimport cartReducers from '../../reducers/carts';\nimport { QRCodeSVG } from 'qrcode.react';\n\n// fn: Lấy địa chỉ giao hàng của user theo index\nconst getUserDeliveryAdd = async (userId, index = 0) => {\n  try {\n    const response = await addressApi.getDeliveryAddressList(userId, 1);\n    if (response) {\n      return response.data.list[index];\n    }\n    return null;\n  } catch (err) {\n    return null;\n  }\n};\n\nfunction PaymentPage() {\n  const dispatch = useDispatch();\n  const isAuth = useSelector((state) => state.authenticate.isAuth);\n\n  // ghi chú đơn hàng\n  const note = useRef('');\n  const addressIndex = useRef(-1);\n  const paymentMethod = useRef(1);\n  const selectedVoucher = useRef(null)\n  const [transport, setTransport] = useState(0);\n  const carts = useSelector((state) => state.carts);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isOrderSuccess, setIsOrderSuccess] = useState(false);\n  const [qrcodeModalOpen, setQrcodeModalOpen] = useState(false);\n  const [qrCodeLinkPayment, setQrCodeLinkPayment] = useState('')\n  // giá tạm tính\n  const tempPrice = carts.reduce(\n    (a, b) => a + (b.price + (b.price * b.discount) / 100) * b.amount,\n    0,\n  );\n  const transportFee =\n    tempPrice >= 1000000\n      ? 0\n      : constants.TRANSPORT_METHOD_OPTIONS.find(\n        (item) => item.value === transport,\n      ).price;\n  // fn: hiển thị danh sách đơn hàng\n  // Note: Chưa kiểm tra tình trạng thật của sản phẩm trong db !\n  function showOrderInfo(carts) {\n    return carts.map((item, index) => (\n      <Card key={index}>\n        <Card.Meta\n          avatar={\n            // <Avatar size={48} shape=\"square\" src={item.img} alt=\"Photo\" />\n            <Image src={item.img} preview={false} width={70} />\n          }\n          title={helpers.reduceProductName(item.name, 40)}\n          description={\n            <>\n              <span>{`Quantity: ${item.amount}`}</span>\n              <p className=\"font-size-16px font-weight-700\">\n                {helpers.formatProductPrice(item.price)}\n              </p>\n            </>\n          }\n        />\n      </Card>\n    ));\n  }\n\n  // event: đặt hàng\n  const onCheckout = async () => {\n    try {\n      setIsLoading(true); //loading khi server đang xử lý đơn hàng\n      if (addressIndex.current === -1) {\n        message.warn('Vui lòng chọn địa chỉ giao hàng');\n        setIsLoading(false);\n        return;\n      }\n      const deliveryAdd = addressIndex.current;\n      const transportMethod = transport;\n      const orderDate = new Date();\n      const productList = carts.map((item, index) => {\n        const { amount, bookId } = item;\n        return {\n          quantity: amount,\n          bookId\n        };\n      });\n      const response = await orderApi.postCreateOrder({\n        deliveryAdd,\n        paymentMethod: paymentMethod.current,\n        transportMethod,\n        transportFee,\n        orderDate,\n        productList,\n        note: note.current,\n        voucherId: selectedVoucher.current\n      });\n      if (response && response.status === 200) {\n        if (paymentMethod.current === 1) { //COD\n          setTimeout(() => {\n            message.success('Đặt hàng thành công', 2);\n            setIsLoading(false);\n            setIsOrderSuccess(true);\n            dispatch(cartReducers.resetCart());\n          }, 1000);\n        } else if (paymentMethod.current === 2) {\n          setTimeout(() => {\n            // message.success('Đặt hàng thành công', 2);\n            setIsLoading(false);\n            setQrCodeLinkPayment(response.data.direct)\n            setQrcodeModalOpen(true)\n            // dispatch(cartReducers.resetCart());\n          }, 1000);\n        } else if (paymentMethod.current === 3) {\n          window.location.replace(response.data.direct)\n        }\n\n      }\n    } catch (error) {\n      message.error('Đặt hàng thất bại, thử lại', 3);\n      setIsLoading(false);\n    }\n  };\n  // rendering ...\n  return (\n    <>\n      {carts.length <= 0 && !isOrderSuccess && !qrcodeModalOpen && (\n        <Redirect to={constants.ROUTES.CART} />\n      )}\n      {/* {isAuth ? ( */}\n      {true ? (\n        <div className=\"m-tb-32 container\">\n          {isOrderSuccess ? (\n            <Result\n              status=\"success\"\n              title=\"Đơn hàng của bạn đã đặt thành công.\"\n              subTitle=\"Xem chi tiết đơn hàng vừa rồi\"\n              extra={[\n                <Button type=\"default\" key=\"0\">\n                  <Link to={constants.ROUTES.ACCOUNT + '/orders'}>\n                    Xem chi tiết đơn hàng\n                  </Link>\n                </Button>,\n                <Button key=\"1\" type=\"primary\">\n                  <Link to=\"/\">Tiếp tục mua sắm</Link>\n                </Button>,\n              ]}\n            />\n          ) : qrcodeModalOpen ? <div className='t-center'>\n            <h2>Quét mã QR để thanh toán</h2>\n            <QRCodeSVG value={qrCodeLinkPayment} level=\"L\" includeMargin size={200} />\n            <div>\n              <Button key=\"1\" type=\"primary\">\n                <Link to=\"/account/orders\">Đi tới giỏ hàng</Link>\n              </Button>\n            </div>\n\n          </div> : (\n            <Row gutter={[16, 16]}>\n              {/* Đường dẫn */}\n              <Col span={24} className=\"d-flex page-position\">\n                <Link to=\"/\">\n                  <HomeOutlined\n                    className=\"p-12 icon-home font-size-16px bg-white\"\n                    style={{ borderRadius: 50 }}\n                  />\n                </Link>\n                <span\n                  className=\"p-lr-8 font-weight-500\"\n                  style={{ lineHeight: '40px' }}>{`>`}</span>\n                <span\n                  className=\"p-8 font-weight-500 bg-white\"\n                  style={{ borderRadius: 50 }}>\n                  Check out\n                </span>\n              </Col>\n\n              {/* Thông tin giao hàng  */}\n              <Col span={24} md={16}>\n                {/* địa chỉ giao nhận, cách thức giao */}\n                <div className=\"p-12 bg-white bor-rad-8 m-tb-16\">\n                  <h2 className='m-b-5'>Shipment Details</h2>\n                  <AddressUserList\n                    isCheckout={true}\n                    onChecked={(value) => (addressIndex.current = value)}\n                  />\n                </div>\n\n                {/* ghi chú */}\n                <div className=\"p-12 p-b-25 bg-white bor-rad-8\">\n                  <h2 className=\"m-b-8\">Order Notes</h2>\n                  <Input.TextArea\n                    placeholder=\"Notes about your order\"\n                    maxLength={200}\n                    showCount\n                    allowClear\n                    onChange={(value) => (note.current = value.target.value)}\n                  />\n                </div>\n\n                {/* phương thức thanh toán */}\n                <div className=\"p-12 bg-white bor-rad-8 m-tb-16\">\n                  <h2 className=\"m-b-8\">Payment method</h2>\n                  <p>Your payment information is secured to protect your information.</p>\n                  <Row gutter={[16, 16]}>\n                    <Col span={24} md={8}\n                      onClick={() => paymentMethod.current = 1}\n                    >\n                      <div className=\"p-tb-8 p-lr-16 bg-gray item-active h-100px\">\n                        <b className=\"font-size-16px\">\n                          COD\n                        </b>\n                        <p>\n                          Thanh toán khi nhận hàng <DollarCircleOutlined className=\"t-color-second\" />\n                        </p>\n                      </div>\n                    </Col>\n                    <Col\n                      span={24}\n                      md={8}\n                      onClick={() => {\n                        paymentMethod.current = 3; // 3 trên database là card direction\n                      }\n                      }>\n                      <div className=\"p-tb-8 p-lr-16 bg-gray h-100px\">\n                        <b className=\"font-size-16px\">\n                          Card\n                        </b>\n                        <p>\n                          Thanh toán với thẻ ngân hàng\n                        </p>\n                      </div>\n                    </Col>\n                    <Col\n                      span={24}\n                      md={8}\n                      onClick={() => {\n                        paymentMethod.current = 2; //2 tương ứng qr code trên database\n                      }\n                      }>\n                      <div className=\"p-tb-8 p-lr-16 bg-gray h-100px\">\n                        <b className=\"font-size-16px\">\n                          PayPal QR Code\n                        </b>\n                        <p>\n                          Thanh toán hộ với QRcode\n                        </p>\n                      </div>\n                    </Col>\n                  </Row>\n                </div>\n              </Col>\n\n              {/* đặt hàng */}\n              <Col span={24} md={8}>\n                {/* thồng tin đơn hàng */}\n                <div className=\"p-12 bg-white bor-rad-8 m-tb-16\">\n                  <div className=\"d-flex justify-content-between\">\n                    <h2>Order Information</h2>\n                    <Button type=\"link\" size=\"large\">\n                      <Link to={constants.ROUTES.CART}>Edit</Link>\n                    </Button>\n                  </div>\n                  <div>{showOrderInfo(carts)}</div>\n                </div>\n\n                {/* tiến hành đặt hàng */}\n                <div className=\"bg-white\">\n                  <CartPayment\n                    isLoading={isLoading}\n                    carts={carts}\n                    isCheckout={true}\n                    transportFee={transportFee}\n                    onCheckout={onCheckout}\n                    selectedVoucher={selectedVoucher}\n                  />\n                  <div className=\"t-center p-b-16\">\n                    <span\n                      style={{\n                        color: '#ff5000',\n                      }}>{`(Please double check your order before making the purchase)`}</span>\n                  </div>\n                </div>\n              </Col>\n            </Row>\n          )}\n        </div>\n      ) : (\n        <Redirect to={constants.ROUTES.LOGIN} />\n      )}\n    </>\n  );\n}\n\nexport default PaymentPage;\n"],"names":["addressApi","getProvince","axiosClient","ADDRESS_API_ENDPOINT","getDistrict","provinceId","params","id","getWardStreetList","districtId","district","getDeliveryAddressList","userId","flag","url","postAddDeliveryAddress","newAddress","delDeliveryAddress","item","putSetDefaultDeliveryAddress","addressId","voucherApi","getVoucher","cart","categories","forEach","find","category","push","CartPayment","props","carts","isCheckout","transportFee","onCheckout","isLoading","selectedVoucher","useState","voucher","setVoucher","voucherList","setVoucherList","voucherDiscountValue","useMemo","length","helpers","message","tempPrice","reduce","a","b","price","discount","amount","totalDiscount","useEffect","result","data","rows","menu","onClick","e","key","className","map","gutter","style","width","span","preview","src","voucherIcon","code","color","percentage","percent","overlay","trigger","placement","selectable","arrow","value","placeholder","size","onChange","target","allowClear","fontSize","type","loading","backgroundColor","to","constants","defaultProps","Option","Select","onCloseForm","isVisible","setIsVisible","provinceList","setProvinceList","districtList","setDistrictList","wardList","setWardList","useRef","formRef","user","useSelector","state","isSubscribe","response","getProvinceList","getDistrictList","wards","onAddAddress","name","phone","rest","sentData","address","_id","status","visible","closable","maskClosable","onCancel","centered","footer","danger","htmlType","form","onFinish","ref","rules","required","max","maxLength","validator","_","test","Promise","resolve","reject","min","filterOption","input","option","children","toLowerCase","indexOf","showSearch","current","resetFields","index","prefix","AddressUserList","onChecked","showAll","isVisibleForm","setIsVisibleForm","isVisibelAddressList","setIsVisibelAddressList","list","setList","activeItem","setActiveItem","updateList","setUpdateList","setIsLoading","onDelDeliveryAdd","onSetDefaultDeliveryAdd","defaultAddress","sort","Number","showAddressList","newList","reciver","ward","province","details","border","prev","tip","height","PlusOutlined","addFlag","onOk","DollarCircleOutlined","React","AntdIcon","_objectSpread","icon","DollarCircleOutlinedSvg","displayName","qrcodegen","qrcodegen2","__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","enumerable","configurable","writable","__spreadValues","prop","call","__objRest","source","exclude","_QrCode","version","errorCorrectionLevel","dataCodewords","msk","this","modules","isFunction","MIN_VERSION","MAX_VERSION","RangeError","row","i","slice","drawFunctionPatterns","allCodewords","addEccAndInterleave","drawCodewords","minPenalty","applyMask","drawFormatBits","penalty","getPenaltyScore","assert","mask","x","y","setFunctionModule","drawFinderPattern","alignPatPos","getAlignmentPatternPositions","numAlign","j","drawAlignmentPattern","drawVersion","formatBits","rem","bits","getBit","Math","floor","dy","dx","dist","abs","xx","yy","isDark","ver","ecl","getNumDataCodewords","numBlocks","NUM_ERROR_CORRECTION_BLOCKS","ordinal","blockEccLen","ECC_CODEWORDS_PER_BLOCK","rawCodewords","getNumRawDataModules","numShortBlocks","shortBlockLen","blocks","rsDiv","reedSolomonComputeDivisor","k","dat","ecc","reedSolomonComputeRemainder","concat","block","right","vert","invert","Error","runColor","runX","runHistory","PENALTY_N1","finderPenaltyAddHistory","finderPenaltyCountPatterns","PENALTY_N3","finderPenaltyTerminateAndCount","runY","PENALTY_N2","dark","sum","total","ceil","PENALTY_N4","step","pos","splice","n","core","currentRunColor","currentRunLength","pop","unshift","text","segs","QrSegment","makeSegments","encodeSegments","seg","makeBytes","dataUsedBits","minVersion","maxVersion","boostEcl","dataCapacityBits2","usedBits","getTotalBits","Ecc","MEDIUM","QUARTILE","HIGH","newEcl","bb","appendBits","mode","modeBits","numChars","numCharCountBits","getData","dataCapacityBits","padByte","degree","root","reedSolomonMultiply","divisor","factor","shift","coef","z","QrCode","val","len","cond","_QrSegment","bitData","Mode","BYTE","digits","isNumeric","parseInt","substr","NUMERIC","isAlphanumeric","temp","ALPHANUMERIC_CHARSET","charAt","ALPHANUMERIC","makeNumeric","makeAlphanumeric","toUtf8ByteArray","assignVal","ECI","NUMERIC_REGEX","ALPHANUMERIC_REGEX","ccbits","Infinity","str","encodeURI","charCodeAt","QrCode2","_Ecc","LOW","QrSegment2","_Mode","numBitsCharCount","KANJI","qrcodegen_default","ERROR_LEVEL_MAP","L","M","Q","H","DEFAULT_PROPS","level","bgColor","fgColor","includeMargin","generatePath","margin","ops","start","cell","join","excavateModules","excavation","h","w","getImageSettings","cells","imageSettings","numCells","defaultSize","scale","excavate","floorX","floorY","SUPPORTS_PATH2D","Path2D","addPath","QRCodeCanvas","_canvas","_image","update","value2","size2","level2","bgColor2","fgColor2","includeMargin2","canvas","ctx","getContext","encodeText","getModules","calculatedImageSettings","image","haveImageToRender","complete","naturalHeight","naturalWidth","pixelRatio","window","devicePixelRatio","fillStyle","fillRect","fill","rdx","cdx","drawImage","_a","otherProps","canvasStyle","img","imgSrc","display","onLoad","QRCodeSVG","xlinkHref","preserveAspectRatio","fgPath","shapeRendering","viewBox","d","renderAs","dispatch","useDispatch","note","authenticate","isAuth","addressIndex","paymentMethod","transport","isOrderSuccess","setIsOrderSuccess","qrcodeModalOpen","setQrcodeModalOpen","qrCodeLinkPayment","setQrCodeLinkPayment","deliveryAdd","transportMethod","orderDate","Date","productList","quantity","bookId","orderApi","voucherId","setTimeout","cartReducers","direct","location","replace","Redirect","title","subTitle","extra","HomeOutlined","borderRadius","lineHeight","md","showCount","avatar","description","showOrderInfo"],"sourceRoot":""}